import{t as T,y as I,A as K,P as re,S as dt,av as se,J as ie,aw as oe,n as ae,D as Vt,d as J,ax as le,ah as ue,ay as B,o as W,b as tt,e as Q,f as At,h as V,ac as ce,F as he,g as wt,v as Ht,a8 as de,az as fe,l as ft,i as pe}from"./modules/vue-DJcEiztt.js";import{X as ve,a as _t,v as gt,a0 as pt,a1 as It,a2 as ge,Q as xe,a3 as Nt,S as jt,z as zt,A as Ft,Y as me,a4 as ye,_ as bt,a5 as we,a6 as _e,a7 as be,a8 as Se,a9 as Pe,aa as Ee,ab as Me}from"./index-0Gy_dhNt.js";import{u as $e}from"./slidev/context-DU5YJk2D.js";import{c as H,g as Ce,a as ke}from"./modules/file-saver-igGfcqei.js";function Le(t){var e;return{info:T(((e=ve(t))==null?void 0:e.meta.slide)??null),update:async()=>{}}}const vt={};function Un(t){function e(r){return vt[r]??(vt[r]=Le(r))}return{info:I({get(){return e(K(t)).info.value},set(r){e(K(t)).info.value=r}}),update:async(r,i)=>{const u=e(i??K(t)),l=await u.update(r);return l&&(u.info.value=l),l}}}var De=Object.defineProperty,Tt=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Kt=(t,e,r)=>e in t?De(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xt=(t,e)=>{for(var r in e||(e={}))Ae.call(e,r)&&Kt(t,r,e[r]);if(Tt)for(var r of Tt(e))Ie.call(e,r)&&Kt(t,r,e[r]);return t},Ne=()=>({emit(t,...e){for(let r=0,i=this.events[t]||[],u=i.length;r<u;r++)i[r](...e)},events:{},on(t,e){var r;return((r=this.events)[t]||(r[t]=[])).push(e),()=>{var i;this.events[t]=(i=this.events[t])==null?void 0:i.filter(u=>e!==u)}}});function Ot(t,e,r,i=u=>u){return t*i(.5-e*(.5-r))}function je(t){return[-t[0],-t[1]]}function R(t,e){return[t[0]+e[0],t[1]+e[1]]}function F(t,e){return[t[0]-e[0],t[1]-e[1]]}function O(t,e){return[t[0]*e,t[1]*e]}function ze(t,e){return[t[0]/e,t[1]/e]}function rt(t){return[t[1],-t[0]]}function Rt(t,e){return t[0]*e[0]+t[1]*e[1]}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Te(t){return Math.hypot(t[0],t[1])}function Ke(t){return t[0]*t[0]+t[1]*t[1]}function Xt(t,e){return Ke(F(t,e))}function Yt(t){return ze(t,Te(t))}function Oe(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function st(t,e,r){let i=Math.sin(r),u=Math.cos(r),l=t[0]-e[0],f=t[1]-e[1],s=l*u-f*i,n=l*i+f*u;return[s+e[0],n+e[1]]}function mt(t,e,r){return R(t,O(F(e,t),r))}function qt(t,e,r){return R(t,O(e,r))}var{min:Z,PI:Re}=Math,Gt=.275,it=Re+1e-4;function Xe(t,e={}){let{size:r=16,smoothing:i=.5,thinning:u=.5,simulatePressure:l=!0,easing:f=b=>b,start:s={},end:n={},last:a=!1}=e,{cap:h=!0,easing:o=b=>b*(2-b)}=s,{cap:c=!0,easing:d=b=>--b*b*b+1}=n;if(t.length===0||r<=0)return[];let p=t[t.length-1].runningLength,m=s.taper===!1?0:s.taper===!0?Math.max(r,p):s.taper,L=n.taper===!1?0:n.taper===!0?Math.max(r,p):n.taper,D=Math.pow(r*i,2),j=[],g=[],x=t.slice(0,10).reduce((b,N)=>{let k=N.pressure;if(l){let A=Z(1,N.distance/r),ut=Z(1,1-A);k=Z(1,b+(ut-b)*(A*Gt))}return(b+k)/2},t[0].pressure),v=Ot(r,u,t[t.length-1].pressure,f),M,P=t[0].vector,y=t[0].point,_=y,w=y,S=_,C=!1;for(let b=0;b<t.length;b++){let{pressure:N}=t[b],{point:k,vector:A,distance:ut,runningLength:nt}=t[b];if(b<t.length-1&&p-nt<3)continue;if(u){if(l){let G=Z(1,ut/r),ht=Z(1,1-G);N=Z(1,x+(ht-x)*(G*Gt))}v=Ot(r,u,N,f)}else v=r/2;M===void 0&&(M=v);let te=nt<m?o(nt/m):1,ee=p-nt<L?d((p-nt)/L):1;v=Math.max(.01,v*Math.min(te,ee));let kt=(b<t.length-1?t[b+1]:t[b]).vector,ct=b<t.length-1?Rt(A,kt):1,ne=Rt(A,P)<0&&!C,Lt=ct!==null&&ct<0;if(ne||Lt){let G=O(rt(P),v);for(let ht=1/13,ot=0;ot<=1;ot+=ht)w=st(F(k,G),k,it*ot),j.push(w),S=st(R(k,G),k,it*-ot),g.push(S);y=w,_=S,Lt&&(C=!0);continue}if(C=!1,b===t.length-1){let G=O(rt(A),v);j.push(F(k,G)),g.push(R(k,G));continue}let Dt=O(rt(mt(kt,A,ct)),v);w=F(k,Dt),(b<=1||Xt(y,w)>D)&&(j.push(w),y=w),S=R(k,Dt),(b<=1||Xt(_,S)>D)&&(g.push(S),_=S),x=N,P=A}let E=t[0].point.slice(0,2),$=t.length>1?t[t.length-1].point.slice(0,2):R(t[0].point,[1,1]),z=[],X=[];if(t.length===1){if(!(m||L)||a){let b=qt(E,Yt(rt(F(E,$))),-(M||v)),N=[];for(let k=1/13,A=k;A<=1;A+=k)N.push(st(b,E,it*2*A));return N}}else{if(!(m||L&&t.length===1))if(h)for(let N=1/13,k=N;k<=1;k+=N){let A=st(g[0],E,it*k);z.push(A)}else{let N=F(j[0],g[0]),k=O(N,.5),A=O(N,.51);z.push(F(E,k),F(E,A),R(E,A),R(E,k))}let b=rt(je(t[t.length-1].vector));if(L||m&&t.length===1)X.push($);else if(c){let N=qt($,b,v);for(let k=1/29,A=k;A<1;A+=k)X.push(st(N,$,it*3*A))}else X.push(R($,O(b,v)),R($,O(b,v*.99)),F($,O(b,v*.99)),F($,O(b,v)))}return j.concat(X,g.reverse(),z)}function qe(t,e={}){var r;let{streamline:i=.5,size:u=16,last:l=!1}=e;if(t.length===0)return[];let f=.15+(1-i)*.85,s=Array.isArray(t[0])?t:t.map(({x:d,y:p,pressure:m=.5})=>[d,p,m]);if(s.length===2){let d=s[1];s=s.slice(0,-1);for(let p=1;p<5;p++)s.push(mt(s[0],d,p/4))}s.length===1&&(s=[...s,[...R(s[0],[1,1]),...s[0].slice(2)]]);let n=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],a=!1,h=0,o=n[0],c=s.length-1;for(let d=1;d<s.length;d++){let p=l&&d===c?s[d].slice(0,2):mt(o.point,s[d],f);if(Fe(o.point,p))continue;let m=Oe(p,o.point);if(h+=m,d<c&&!a){if(h<u)continue;a=!0}o={point:p,pressure:s[d][2]>=0?s[d][2]:.5,vector:Yt(F(o.point,p)),distance:m,runningLength:h},n.push(o)}return n[0].vector=((r=n[1])==null?void 0:r.vector)||[0,0],n}function Ge(t,e={}){return Xe(qe(t,e),e)}function at(t,e){return t-e}function Be(t){return t<0?-1:1}function lt(t){return[Math.abs(t),Be(t)]}function Zt(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var Ue=2,q=Ue,et=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var e,r,i;const u=this.drauu.el,l=(e=this.drauu.options.coordinateScale)!=null?e:1,f=(r=this.drauu.options.offset)!=null?r:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const s=this.drauu.el.getBoundingClientRect();return{x:(t.pageX-s.left+f.x)*l,y:(t.pageY-s.top+f.y)*l,pressure:t.pressure}}else{const s=this.drauu.svgPoint;s.x=t.clientX+f.x,s.y=t.clientY+f.y;const n=s.matrixTransform((i=u.getScreenCTM())==null?void 0:i.inverse());return{x:n.x*l,y:n.y*l,pressure:t.pressure}}}createElement(t,e){var r;const i=document.createElementNS("http://www.w3.org/2000/svg",t),u=e?xt(xt({},this.brush),e):this.brush;return i.setAttribute("fill",(r=u.fill)!=null?r:"transparent"),i.setAttribute("stroke",u.color),i.setAttribute("stroke-width",u.size.toString()),i.setAttribute("stroke-linecap","round"),u.dasharray&&i.setAttribute("stroke-dasharray",u.dasharray),i}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(q))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},Ve=class Qt extends et{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){return Qt.getSvgData(e,this.brush)}static getSvgData(e,r){const i=Ge(e,xt({size:r.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},r.stylusOptions));if(!i.length)return"";const u=i.reduce((l,[f,s],n,a)=>{const[h,o]=a[(n+1)%a.length];return l.push(f,s,(f+h)/2,(s+o)/2),l},["M",...i[0],"Q"]);return u.push("Z"),u.map(l=>typeof l=="number"?l.toFixed(2):l).join(" ")}},He=class extends et{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=lt(t.x-this.start.x),[i,u]=lt(t.y-this.start.y);if(this.shiftPressed){const l=Math.min(e,i);e=l,i=l}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",i);else{const[l,f]=[this.start.x,this.start.x+e*r].sort(at),[s,n]=[this.start.y,this.start.y+i*u].sort(at);this.attr("cx",(l+f)/2),this.attr("cy",(s+n)/2),this.attr("rx",(f-l)/2),this.attr("ry",(n-s)/2)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Jt(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","marker"),u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("fill",e),i.setAttribute("id",t),i.setAttribute("viewBox","0 -5 10 10"),i.setAttribute("refX","5"),i.setAttribute("refY","0"),i.setAttribute("markerWidth","4"),i.setAttribute("markerHeight","4"),i.setAttribute("orient","auto"),u.setAttribute("d","M0,-5L10,0L0,5"),i.appendChild(u),r.appendChild(i),r}var Ye=class extends et{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=Zt(),r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.append(Jt(e,this.brush.color)),r.append(this.el),this.attr("marker-end",`url(#${e})`),r}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:r}=t;if(this.shiftPressed){const i=t.x-this.start.x,u=t.y-this.start.y;if(u!==0){let l=i/u;l=Math.round(l),Math.abs(l)<=1?(e=this.start.x+u*l,r=this.start.y+u):(e=this.start.x+i,r=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-r),this.attr("x2",e),this.attr("y2",r)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",r)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||t.getTotalLength()<5)}},Ze=class extends et{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=lt(t.x-this.start.x),[i,u]=lt(t.y-this.start.y);if(this.shiftPressed){const l=Math.min(e,i);e=l,i=l}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-i),this.attr("width",e*2),this.attr("height",i*2);else{const[l,f]=[this.start.x,this.start.x+e*r].sort(at),[s,n]=[this.start.y,this.start.y+i*u].sort(at);this.attr("x",l),this.attr("y",s),this.attr("width",f-l),this.attr("height",n-s)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Qe(t,e){const r=t.x-e.x,i=t.y-e.y;return r*r+i*i}function Je(t,e,r){let i=e.x,u=e.y,l=r.x-i,f=r.y-u;if(l!==0||f!==0){const s=((t.x-i)*l+(t.y-u)*f)/(l*l+f*f);s>1?(i=r.x,u=r.y):s>0&&(i+=l*s,u+=f*s)}return l=t.x-i,f=t.y-u,l*l+f*f}function We(t,e){let r=t[0];const i=[r];let u;for(let l=1,f=t.length;l<f;l++)u=t[l],Qe(u,r)>e&&(i.push(u),r=u);return r!==u&&u&&i.push(u),i}function yt(t,e,r,i,u){let l=i,f=0;for(let s=e+1;s<r;s++){const n=Je(t[s],t[e],t[r]);n>l&&(f=s,l=n)}l>i&&(f-e>1&&yt(t,e,f,i,u),u.push(t[f]),r-f>1&&yt(t,f,r,i,u))}function tn(t,e){const r=t.length-1,i=[t[0]];return yt(t,0,r,e,i),i.push(t[r]),i}function Bt(t,e,r=!1){if(t.length<=2)return t;const i=e*e;return t=r?t:We(t,i),t=tn(t,i),t}var en=class U extends et{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=Zt();const r=Jt(this.arrowId,this.brush.color);this.el.appendChild(r)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=Bt(this.points,1,!0),this.count=0),this.attr("d",U.toSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!(!e||(e.setAttribute("d",U.toSvgData(Bt(this.points,1,!0))),!e.getTotalLength()))}static line(e,r){const i=r.x-e.x,u=r.y-e.y;return{length:Math.sqrt(i**2+u**2),angle:Math.atan2(u,i)}}static controlPoint(e,r,i,u){const l=r||e,f=i||e,s=.2,n=U.line(l,f),a=n.angle+(u?Math.PI:0),h=n.length*s,o=e.x+Math.cos(a)*h,c=e.y+Math.sin(a)*h;return{x:o,y:c}}static bezierCommand(e,r,i){const u=U.controlPoint(i[r-1],i[r-2],e),l=U.controlPoint(e,i[r-1],i[r+1],!0);return`C ${u.x.toFixed(q)},${u.y.toFixed(q)} ${l.x.toFixed(q)},${l.y.toFixed(q)} ${e.x.toFixed(q)},${e.y.toFixed(q)}`}static toSvgData(e){return e.reduce((r,i,u,l)=>u===0?`M ${i.x.toFixed(q)},${i.y.toFixed(q)}`:`${r} ${U.bezierCommand(i,u,l)}`,"")}},nn=class extends et{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const e=(r,i)=>{if(r&&r.length)for(let u=0;u<r.length;u++){const l=r[u];if(l.getTotalLength){const f=l.getTotalLength();for(let s=0;s<this.pathSubFactor;s++){const n=l.getPointAtLength(f*s/this.pathSubFactor),a=l.getPointAtLength(f*(s+1)/this.pathSubFactor);this.pathFragments.push({x1:n.x,x2:a.x,y1:n.y,y2:a.y,segment:s,element:i||l})}}else l.children&&e(l.children,l)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(e=>this.drauu._restoreNode(e)),redo:()=>t.forEach(e=>this.drauu._removeNode(e))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const e=this.pathFragments[t],r={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(e,r)&&(this.drauu._removeNode(e.element),this._erased.push(e.element))}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,e){const r=t.x1,i=t.x2,u=e.x1,l=e.x2,f=t.y1,s=t.y2,n=e.y1,a=e.y2,h=(r-i)*(n-a)-(f-s)*(u-l),o=(r*s-f*i)*(u-l)-(r-i)*(u*a-n*l),c=(r*s-f*i)*(n-a)-(f-s)*(u*a-n*l),d=(p,m,L)=>p>=m&&p<=L?!0:p>=L&&p<=m;if(h===0)return!1;{const p={x:o/h,y:c/h};return d(p.x,r,i)&&d(p.y,f,s)&&d(p.x,u,l)&&d(p.y,n,a)}}};function rn(t){return{draw:new en(t),stylus:new Ve(t),line:new Ye(t),rectangle:new Ze(t),ellipse:new He(t),eraseLine:new nn(t)}}var sn=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Ne(),this._originalPointerId=null,this._models=rn(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e,r=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const i=this.resolveSelector(e)||this.el,u=this.eventStart.bind(this),l=this.eventMove.bind(this),f=this.eventEnd.bind(this),s=this.eventKeyboard.bind(this);i.addEventListener("pointerdown",u,{passive:!1}),r.addEventListener("pointermove",l,{passive:!1}),r.addEventListener("pointerup",f,{passive:!1}),r.addEventListener("pointercancel",f,{passive:!1}),r.addEventListener("keydown",s,!1),r.addEventListener("keyup",s,!1),this._disposables.push(()=>{i.removeEventListener("pointerdown",u),r.removeEventListener("pointermove",l),r.removeEventListener("pointerup",f),r.removeEventListener("pointercancel",f),r.removeEventListener("keydown",s,!1),r.removeEventListener("keyup",s,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);if(!e)this.cancel();else if(e===!0){const r=this._currentNode;this._appendNode(r),this.commit({undo:()=>this._removeNode(r),redo:()=>this._restoreNode(r)})}else this.commit(e);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._opStack.length=0,this._opIndex=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const e=this._elements.at(-1);e?e.after(t):this.el.append(t);const r=this._elements.push(t)-1;t.dataset.drauu_index=r.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const e=+t.dataset.drauu_index;this._elements[e]=t;for(let r=e-1;r>=0;r--){const i=this._elements[r];if(i){i.after(t);return}}this.el.prepend(t)}};function on(t){return new sn(t)}const an=re(()=>{const{currentSlideNo:t,isPresenter:e}=_t(),r=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],i=dt("slidev-drawing-enabled",!1),u=dt("slidev-drawing-pinned",!1),l=se(dt("slidev-drawing-brush",{color:r[0],size:4,mode:"stylus"})),f=T(!1),s=T(!1),n=T(!1),a=T(!1),h=T("stylus"),o=I(()=>gt.drawings.syncAll||e.value);let c=!1;const d=I({get(){return h.value},set(g){h.value=g,g==="arrow"?(m.mode="line",l.arrowEnd=!0):(m.mode=g,l.arrowEnd=!1)}}),p=ie({brush:l,acceptsInputTypes:I(()=>i.value&&(!gt.drawings.presenterOnly||e.value)?void 0:["pen"]),coordinateTransform:!1}),m=oe(on(p));function L(){m.clear(),o.value&&It(t.value,"")}function D(){var g;n.value=m.canRedo(),s.value=m.canUndo(),a.value=!!((g=m.el)!=null&&g.children.length)}function j(g){c=!0;const x=pt[g||t.value];x!=null?m.load(x):m.clear(),D(),c=!1}return m.on("changed",()=>{if(D(),!c){const g=m.dump(),x=t.value;(pt[x]||"")!==g&&o.value&&It(x,m.dump())}}),ge(g=>{c=!0,g[t.value]!=null&&m.load(g[t.value]||""),c=!1,D()}),ae(()=>{Vt(t,()=>{m.mounted&&j()},{immediate:!0})}),m.on("start",()=>f.value=!0),m.on("end",()=>f.value=!1),window.addEventListener("keydown",g=>{if(!i.value||xe.value)return;const x=!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey;let v=!0;g.code==="KeyZ"&&(g.ctrlKey||g.metaKey)?g.shiftKey?m.redo():m.undo():g.code==="Escape"?i.value=!1:g.code==="KeyL"&&x?d.value="line":g.code==="KeyA"&&x?d.value="arrow":g.code==="KeyS"&&x?d.value="stylus":g.code==="KeyR"&&x?d.value="rectangle":g.code==="KeyE"&&x?d.value="ellipse":g.code==="KeyC"&&x?L():g.code.startsWith("Digit")&&x&&+g.code[5]<=r.length?l.color=r[+g.code[5]-1]:v=!1,v&&(g.preventDefault(),g.stopPropagation())},!1),{brush:l,brushColors:r,canClear:a,canRedo:n,canUndo:s,clear:L,drauu:m,drauuOptions:p,drawingEnabled:i,drawingMode:d,drawingPinned:u,drawingState:pt,isDrawing:f,loadCanvas:j}}),ln=["id"],un=["id"],cn=J({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1}},setup(t){const e=t,{isPrintMode:r}=_t(),i=T(null),u=le(i),l=T(null),f=I(()=>e.width??u.width.value),s=I(()=>e.width?e.width/Nt.value:u.height.value),n=I(()=>jt.value&&!r.value?+jt.value:Math.min(f.value/zt.value,s.value/Ft.value)),a=I(()=>({height:`${Ft.value}px`,width:`${zt.value}px`,transform:`translate(-50%, -50%) scale(${n.value})`,"--slidev-slide-scale":n.value})),h=I(()=>e.width?{width:`${e.width}px`,height:`${e.width/Nt.value}px`}:{});return e.isMain&&ue(I(()=>`:root { --slidev-slide-scale: ${n.value}; }`)),B(me,n),B(ye,l),(o,c)=>(W(),tt("div",{id:t.isMain?"slide-container":void 0,ref_key:"container",ref:i,class:"slidev-slide-container",style:V(h.value)},[Q("div",{id:t.isMain?"slide-content":void 0,ref_key:"slideElement",ref:l,class:"slidev-slide-content",style:V(a.value)},[At(o.$slots,"default",{},void 0,!0)],12,un),At(o.$slots,"controls",{},void 0,!0)],12,ln))}}),Vn=bt(cn,[["__scopeId","data-v-ed680e43"]]),hn={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},dn=Q("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1),fn=Q("div",null,"Loading slide...",-1),pn=J({__name:"SlideLoading",setup(t){const e=T(!1);return ce(()=>{setTimeout(()=>{e.value=!0},200)}),(r,i)=>(W(),tt("div",hn,[e.value?(W(),tt(he,{key:0},[dn,fn],64)):wt("v-if",!0)]))}});var St={exports:{}};St.exports;(function(t){(function(e,r,i){function u(n){var a=this,h=s();a.next=function(){var o=2091639*a.s0+a.c*23283064365386963e-26;return a.s0=a.s1,a.s1=a.s2,a.s2=o-(a.c=o|0)},a.c=1,a.s0=h(" "),a.s1=h(" "),a.s2=h(" "),a.s0-=h(n),a.s0<0&&(a.s0+=1),a.s1-=h(n),a.s1<0&&(a.s1+=1),a.s2-=h(n),a.s2<0&&(a.s2+=1),h=null}function l(n,a){return a.c=n.c,a.s0=n.s0,a.s1=n.s1,a.s2=n.s2,a}function f(n,a){var h=new u(n),o=a&&a.state,c=h.next;return c.int32=function(){return h.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,o&&(typeof o=="object"&&l(o,h),c.state=function(){return l(h,{})}),c}function s(){var n=4022871197,a=function(h){h=String(h);for(var o=0;o<h.length;o++){n+=h.charCodeAt(o);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return a}r&&r.exports?r.exports=f:this.alea=f})(H,t)})(St);var vn=St.exports,Pt={exports:{}};Pt.exports;(function(t){(function(e,r,i){function u(s){var n=this,a="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var o=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^o^o>>>8},s===(s|0)?n.x=s:a+=s;for(var h=0;h<a.length+64;h++)n.x^=a.charCodeAt(h)|0,n.next()}function l(s,n){return n.x=s.x,n.y=s.y,n.z=s.z,n.w=s.w,n}function f(s,n){var a=new u(s),h=n&&n.state,o=function(){return(a.next()>>>0)/4294967296};return o.double=function(){do var c=a.next()>>>11,d=(a.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=a.next,o.quick=o,h&&(typeof h=="object"&&l(h,a),o.state=function(){return l(a,{})}),o}r&&r.exports?r.exports=f:this.xor128=f})(H,t)})(Pt);var gn=Pt.exports,Et={exports:{}};Et.exports;(function(t){(function(e,r,i){function u(s){var n=this,a="";n.next=function(){var o=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(o^o<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,s===(s|0)?n.x=s:a+=s;for(var h=0;h<a.length+64;h++)n.x^=a.charCodeAt(h)|0,h==a.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function l(s,n){return n.x=s.x,n.y=s.y,n.z=s.z,n.w=s.w,n.v=s.v,n.d=s.d,n}function f(s,n){var a=new u(s),h=n&&n.state,o=function(){return(a.next()>>>0)/4294967296};return o.double=function(){do var c=a.next()>>>11,d=(a.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=a.next,o.quick=o,h&&(typeof h=="object"&&l(h,a),o.state=function(){return l(a,{})}),o}r&&r.exports?r.exports=f:this.xorwow=f})(H,t)})(Et);var xn=Et.exports,Mt={exports:{}};Mt.exports;(function(t){(function(e,r,i){function u(s){var n=this;n.next=function(){var h=n.x,o=n.i,c,d;return c=h[o],c^=c>>>7,d=c^c<<24,c=h[o+1&7],d^=c^c>>>10,c=h[o+3&7],d^=c^c>>>3,c=h[o+4&7],d^=c^c<<7,c=h[o+7&7],c=c^c<<13,d^=c^c<<9,h[o]=d,n.i=o+1&7,d};function a(h,o){var c,d=[];if(o===(o|0))d[0]=o;else for(o=""+o,c=0;c<o.length;++c)d[c&7]=d[c&7]<<15^o.charCodeAt(c)+d[c+1&7]<<13;for(;d.length<8;)d.push(0);for(c=0;c<8&&d[c]===0;++c);for(c==8?d[7]=-1:d[c],h.x=d,h.i=0,c=256;c>0;--c)h.next()}a(n,s)}function l(s,n){return n.x=s.x.slice(),n.i=s.i,n}function f(s,n){s==null&&(s=+new Date);var a=new u(s),h=n&&n.state,o=function(){return(a.next()>>>0)/4294967296};return o.double=function(){do var c=a.next()>>>11,d=(a.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=a.next,o.quick=o,h&&(h.x&&l(h,a),o.state=function(){return l(a,{})}),o}r&&r.exports?r.exports=f:this.xorshift7=f})(H,t)})(Mt);var mn=Mt.exports,$t={exports:{}};$t.exports;(function(t){(function(e,r,i){function u(s){var n=this;n.next=function(){var h=n.w,o=n.X,c=n.i,d,p;return n.w=h=h+1640531527|0,p=o[c+34&127],d=o[c=c+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=o[c]=p^d,n.i=c,p+(h^h>>>16)|0};function a(h,o){var c,d,p,m,L,D=[],j=128;for(o===(o|0)?(d=o,o=null):(o=o+"\0",d=0,j=Math.max(j,o.length)),p=0,m=-32;m<j;++m)o&&(d^=o.charCodeAt((m+32)%o.length)),m===0&&(L=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(L=L+1640531527|0,c=D[m&127]^=d+L,p=c==0?p+1:0);for(p>=128&&(D[(o&&o.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=D[p+34&127],c=D[p=p+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,D[p]=d^c;h.w=L,h.X=D,h.i=p}a(n,s)}function l(s,n){return n.i=s.i,n.w=s.w,n.X=s.X.slice(),n}function f(s,n){s==null&&(s=+new Date);var a=new u(s),h=n&&n.state,o=function(){return(a.next()>>>0)/4294967296};return o.double=function(){do var c=a.next()>>>11,d=(a.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=a.next,o.quick=o,h&&(h.X&&l(h,a),o.state=function(){return l(a,{})}),o}r&&r.exports?r.exports=f:this.xor4096=f})(H,t)})($t);var yn=$t.exports,Ct={exports:{}};Ct.exports;(function(t){(function(e,r,i){function u(s){var n=this,a="";n.next=function(){var o=n.b,c=n.c,d=n.d,p=n.a;return o=o<<25^o>>>7^c,c=c-d|0,d=d<<24^d>>>8^p,p=p-o|0,n.b=o=o<<20^o>>>12^c,n.c=c=c-d|0,n.d=d<<16^c>>>16^p,n.a=p-o|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,s===Math.floor(s)?(n.a=s/4294967296|0,n.b=s|0):a+=s;for(var h=0;h<a.length+20;h++)n.b^=a.charCodeAt(h)|0,n.next()}function l(s,n){return n.a=s.a,n.b=s.b,n.c=s.c,n.d=s.d,n}function f(s,n){var a=new u(s),h=n&&n.state,o=function(){return(a.next()>>>0)/4294967296};return o.double=function(){do var c=a.next()>>>11,d=(a.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=a.next,o.quick=o,h&&(typeof h=="object"&&l(h,a),o.state=function(){return l(a,{})}),o}r&&r.exports?r.exports=f:this.tychei=f})(H,t)})(Ct);var wn=Ct.exports,Wt={exports:{}};const _n={},bn=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),Sn=Ce(bn);(function(t){(function(e,r,i){var u=256,l=6,f=52,s="random",n=i.pow(u,l),a=i.pow(2,f),h=a*2,o=u-1,c;function d(x,v,M){var P=[];v=v==!0?{entropy:!0}:v||{};var y=D(L(v.entropy?[x,g(r)]:x??j(),3),P),_=new p(P),w=function(){for(var S=_.g(l),C=n,E=0;S<a;)S=(S+E)*u,C*=u,E=_.g(1);for(;S>=h;)S/=2,C/=2,E>>>=1;return(S+E)/C};return w.int32=function(){return _.g(4)|0},w.quick=function(){return _.g(4)/4294967296},w.double=w,D(g(_.S),r),(v.pass||M||function(S,C,E,$){return $&&($.S&&m($,_),S.state=function(){return m(_,{})}),E?(i[s]=S,C):S})(w,y,"global"in v?v.global:this==i,v.state)}function p(x){var v,M=x.length,P=this,y=0,_=P.i=P.j=0,w=P.S=[];for(M||(x=[M++]);y<u;)w[y]=y++;for(y=0;y<u;y++)w[y]=w[_=o&_+x[y%M]+(v=w[y])],w[_]=v;(P.g=function(S){for(var C,E=0,$=P.i,z=P.j,X=P.S;S--;)C=X[$=o&$+1],E=E*u+X[o&(X[$]=X[z=o&z+C])+(X[z]=C)];return P.i=$,P.j=z,E})(u)}function m(x,v){return v.i=x.i,v.j=x.j,v.S=x.S.slice(),v}function L(x,v){var M=[],P=typeof x,y;if(v&&P=="object")for(y in x)try{M.push(L(x[y],v-1))}catch{}return M.length?M:P=="string"?x:x+"\0"}function D(x,v){for(var M=x+"",P,y=0;y<M.length;)v[o&y]=o&(P^=v[o&y]*19)+M.charCodeAt(y++);return g(v)}function j(){try{var x;return c&&(x=c.randomBytes)?x=x(u):(x=new Uint8Array(u),(e.crypto||e.msCrypto).getRandomValues(x)),g(x)}catch{var v=e.navigator,M=v&&v.plugins;return[+new Date,e,M,e.screen,g(r)]}}function g(x){return String.fromCharCode.apply(0,x)}if(D(i.random(),r),t.exports){t.exports=d;try{c=Sn}catch{}}else i["seed"+s]=d})(typeof self<"u"?self:H,[],Math)})(Wt);var Pn=Wt.exports,En=vn,Mn=gn,$n=xn,Cn=mn,kn=yn,Ln=wn,Y=Pn;Y.alea=En;Y.xor128=Mn;Y.xorwow=$n;Y.xorshift7=Cn;Y.xor4096=kn;Y.tychei=Ln;var Dn=Y;const An=ke(Dn),Ut=.3,In=.3,Nn=.3,jn=J({__name:"global-bottom",setup(t){const{$slidev:e,$nav:r,$clicksContext:i,$clicks:u,$page:l,$renderContext:f,$frontmatter:s}=$e(),{currentSlideRoute:n}=_t(),a=I(()=>{var v,M;return((M=(v=n.value.meta)==null?void 0:v.slide)==null?void 0:M.frontmatter)||{}}),h=I(()=>a.value.glow||"full"),o=I(()=>+(a.value.glowOpacity??.4)),c=I(()=>+(a.value.glowHue||0)),d=I(()=>a.value.glowSeed==="false"||a.value.glowSeed===!1?Date.now().toString():a.value.glowSeed||"default"),p=I(()=>e.configs.colorSchema==="dark");function m(v){let y=[-.2,1.2],_=[-.2,1.2];function w(C,E){return[Math.max(C[0],E[0]),Math.min(C[1],E[1])]}const S=v.split("-");for(const C of S)switch(C){case"topmost":_=w(_,[-.5,0]);break;case"top":_=w(_,[-.2,.6]);break;case"bottom":_=w(_,[.4,1.2]);break;case"left":y=w(y,[-.2,.6]);break;case"right":y=w(y,[.4,1.2]);break;case"xcenter":y=w(y,[.25,.75]);break;case"ycenter":_=w(_,[.25,.75]);break;case"center":y=w(y,[.25,.75]),_=w(_,[.25,.75]);break;case"full":y=w(y,[0,1]),_=w(_,[0,1]);break}return{x:y,y:_}}function L([v,M],[P,y]){return(P-v)**2+(y-M)**2}function D(v=16){function M(){const w=m(h.value),S=An(`${d.value}-${n.value.no}`);function C([$,z]){return S()*(z-$)+$}function E($,z){return $=$*(1+z*2)-z,S()<Nn?$+(S()-.5)*In:$}return Array.from({length:v}).fill(0).map(()=>[E(C(w.x),Ut),E(C(w.y),Ut)])}const P=T(M()),y=I(()=>P.value.map(([w,S])=>`${w*100}% ${S*100}%`).join(", "));function _(){const w=new Set(M());P.value=P.value.map(S=>{let C=Number.POSITIVE_INFINITY,E;for(const $ of w){const z=L(S,$);z<C&&(C=z,E=$)}return w.delete(E),E})}return Vt(n,()=>{_()}),y}const j=D(10),g=D(6),x=D(3);return(v,M)=>p.value?(W(),tt("div",{key:0,class:"bg transform-gpu overflow-hidden pointer-events-none",style:V({filter:`blur(70px) hue-rotate(${c.value}deg)`}),"aria-hidden":"true"},[Q("div",{class:"clip bg-gradient-to-r from-[#00DC82] to-white/10",style:V({"clip-path":`polygon(${K(j)})`,opacity:o.value})},null,4),Q("div",{class:"clip bg-gradient-to-l from-[#2f96ad] to-white/10",style:V({"clip-path":`polygon(${K(g)})`,opacity:o.value})},null,4),Q("div",{class:"clip bg-gradient-to-t from-lime to-white/10",style:V({"clip-path":`polygon(${K(x)})`,opacity:.2})},null,4)],4)):wt("v-if",!0)}}),zn=bt(jn,[["__scopeId","data-v-9ef80018"]]),Hn={render:()=>[]},Yn={render:()=>[Ht(zn)]},Fn={render:()=>[]},Tn={render:()=>[]},Kn=["data-slidev-no"],On=J({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(t){const e=t,r=I(()=>{var f,s;return((s=(f=e.route.meta)==null?void 0:f.slide)==null?void 0:s.frontmatter.zoom)??1});B(we,e.route),B(_e,e.route.meta.slide.frontmatter),B(be,T(e.route.no)),B(Se,T(e.renderContext)),B(Pe,de(e,"clicksContext")),B(Ee,r);const i=I(()=>r.value===1?void 0:{width:`${100/r.value}%`,height:`${100/r.value}%`,transformOrigin:"top left",transform:`scale(${r.value})`}),u=I(()=>({...i.value,"user-select":gt.selectable?void 0:"none"})),l=I(()=>e.route&&fe({loader:async()=>{var s,n;const f=await e.route.component();return J({mounted:(s=e.clicksContext)==null?void 0:s.onMounted,unmounted:(n=e.clicksContext)==null?void 0:n.onUnmounted,render:()=>Ht(f.default)})},delay:300,loadingComponent:pn}));return(f,s)=>(W(),tt("div",{"data-slidev-no":e.route.no,class:pe(K(Me)(t.route,["slide","presenter"].includes(e.renderContext)?"":"disable-view-transition")),style:V(u.value)},[ft(K(Tn)),ft(K(l)),ft(K(Fn))],14,Kn))}}),Zn=bt(On,[["__scopeId","data-v-7e9633b7"]]),Rn=["innerHTML"],Qn=J({__name:"DrawingPreview",props:{page:{}},setup(t){const{drawingState:e}=an();return(r,i)=>K(e)[r.page]?(W(),tt("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:K(e)[r.page]},null,8,Rn)):wt("v-if",!0)}});export{Yn as G,Zn as S,Qn as _,Vn as a,Le as b,an as c,Hn as d,Un as u};
