var K=Object.defineProperty;var $=e=>{throw TypeError(e)};var P=(e,i,t)=>i in e?K(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var B=(e,i,t)=>P(e,typeof i!="symbol"?i+"":i,t),w=(e,i,t)=>i.has(e)||$("Cannot "+t);var p=(e,i,t)=>(w(e,i,"read from private field"),t?t.call(e):i.get(e)),h=(e,i,t)=>i.has(e)?$("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t),f=(e,i,t,r)=>(w(e,i,"write to private field"),r?r.call(e,t):i.set(e,t),t),x=(e,i,t)=>(w(e,i,"access private method"),t);import{d as F,t as M,K as R,ad as q,o as E,b,e as v,F as I,ae as V,x as z,c as H,k as W,l as G,q as J,s as Q,B as j}from"./modules/vue-BN0LjGHi.js";import{u as A,f as U}from"./slidev/context-BM66hGXr.js";import{I as X}from"./slidev/default-B8xi2SGL.js";import"./index-DRUpKjJk.js";import"./modules/shiki-BzK2kcEU.js";function Y(e){if(e.nodeType===Node.ELEMENT_NODE)return{default:e};if(Array.isArray(e)){if(e.length===1)return{default:e[0]};{const i=/^lang(uage)?-/;return Object.fromEntries(e.map(t=>{let r=[...t.classList].find(n=>i.test(n));return[(r==null?void 0:r.replace(i,""))??t.className,t]}))}}else return e}function Z(e,{preserveCaretChanges:i}={}){let t=[];for(let r=0;r<e.length;r++){let s=e[r],n=t[t.length-1],o=!1;n&&(typeof n=="string"&&(n={type:"insertText",text:n}),s.type==="caret"?(i||(n==null?void 0:n.type)==="caret"&&!s.editor&&(t.splice(t.length-1,1),n.editor&&(s.editor=n.editor)),s.start===s.end&&(s.position=s.start,delete s.start,delete s.end)):s.type==="insertText"?N(s)&&N(n)&&(t.splice(t.length-1,1),s={type:"insertText",text:n.text+s.text,split:!0}):tt(n,s,{ignore:["repeat"]})&&(n.repeat=(n.repeat||1)+1,o=!0)),s.type==="insertText"&&s.text&&Object.keys(s)===2&&(s=s.text),o||t.push(s)}return t}function tt(e,i,{ignore:t=[]}={}){if(!e||!i)return!1;let r=new Set([...Object.keys(e),...Object.keys(i)]);for(let s of r)if(!t.includes(s)&&e[s]!==i[s])return!1;return!0}function N(e){var i;return e.type==="insertText"&&(((i=e.text)==null?void 0:i.length)===1||e.split)&&!e.editor}const S=["input","beforeinput","select","paste","keyup","keydown","pointerdown","pointerup"];var g,m,u,d,y,k,_;const T=class T extends EventTarget{constructor(t,r={}){super();h(this,k);h(this,g);h(this,m);h(this,u);h(this,d);h(this,y);this.editors=Y(t),this.options=Object.assign(T.defaultOptions,r),this.actions=[]}get editor(){return p(this,d)?this.editors[p(this,d)]:this.editors.default}get editorCount(){return Object.keys(this.editors).length}handleEvent(t){let r=p(this,d);for(let o in this.editors)if(this.editors[o].contains(t.target)){f(this,d,o);break}this.actions[this.actions.length-1];let s=this.editor.selectionStart,n=this.editor.selectionEnd;if(t.type==="input"){let o=t.inputType,l=t.data,a={type:o};l!==null&&(a.text=l),o?o==="insertFromPaste"&&l===null?(a.type="insertText",a.text=p(this,g)):o==="insertLineBreak"?(a.type="insertText",a.text=this.editor.value.substring(p(this,u),n)):/^delete(Word|(Soft|Hard)Line)(Forward|Backward)/.test(o)&&(a.after=[s,n]):(a.type="replace",a.text=this.editor.value),x(this,k,_).call(this,a)}if(["select","beforeinput","keydown","keyup","click","pointerdown","pointerup"].includes(t.type)&&(p(this,m)!==s||p(this,u)!==n||p(this,d)!==r)){let o={type:"caret",start:s,end:n};p(this,d)!==r&&this.editorCount>1&&(o.editor=p(this,d)),x(this,k,_).call(this,o,this.options)}if(this.options.keys&&/^key(down|up)$/.test(t.type)){let o=this.options.keys=Array.isArray(this.options.keys)?this.options.keys:[this.options.keys];for(let l=0;l<o.length;l++){let a=o[l];typeof a!="function"&&(typeof a=="string"&&(a={keys:a}),typeof a.keys=="string"&&(a.keys=a.keys.split(/\s*\+\s*/).map(c=>c.toLowerCase())),o[l]=c=>{let C=!a.event&&c.type==="keyup"||a.event===c.type,D=a.keys.every(O=>c.key.toLowerCase()===O||c[O+"Key"]);return C&&D})}if(o.some(l=>l(t))){let l={type:"key",event:t.type,key:t.key,code:t.code};["alt","shift","ctrl","meta"].forEach(a=>l[a+"Key"]=t[a+"Key"]),x(this,k,_).call(this,l)}}t.type==="paste"&&f(this,g,t.clipboardData.getData("text/plain")),f(this,m,s),f(this,u,n)}start(t){t&&(this.options=t);for(let r of S)for(let s in this.editors)this.editors[s].addEventListener(r,this)}pause(){for(let t of S)for(let r in this.editors)this.editors[r].removeEventListener(t,this)}};g=new WeakMap,m=new WeakMap,u=new WeakMap,d=new WeakMap,y=new WeakMap,k=new WeakSet,_=function(t,{preserveCaretChanges:r}={}){let s=Date.now();if(this.options.pauseThreshold&&s-p(this,y)>this.options.pauseThreshold&&this.options.pauses!=="ignore"){let l=s-p(this,y);this.options.pauseCap&&(l=Math.min(l,this.options.pauseCap)),this.actions.push({type:"pause",delay:l})}let n=this.actions.slice(-1);n.push(t);let o=Z(n,{preserveCaretChanges:r});this.actions.pop(),this.actions.push(...o),this.dispatchEvent(new CustomEvent("actionschange",{detail:{action:t}})),f(this,y,s)},B(T,"defaultOptions",{preserveCaretChanges:!1,pauseThreshold:2e3});let L=T;const et={class:"grid grid-cols-2"},st=F({__name:"Rety",setup(e){A();const i=M(null),t=R([]);return q(()=>{let r=new L(i.value);r.start(),r.addEventListener("actionschange",s=>{t.push(s.detail.action)})}),(r,s)=>(E(),b("div",et,[v("textarea",{ref_key:"editor",ref:i},null,512),v("div",null,[(E(!0),b(I,null,V(t,(n,o)=>(E(),b("div",{key:o},z(n),1))),128))])]))}}),pt={__name:"5",setup(e){const{$slidev:i,$nav:t,$clicksContext:r,$clicks:s,$page:n,$renderContext:o,$frontmatter:l}=A();return(a,c)=>{const C=st;return E(),H(X,J(Q(j(U)(j(l),4))),{default:W(()=>[c[0]||(c[0]=v("h1",null,"Rety",-1)),G(C)]),_:1},16)}}};export{pt as default};
