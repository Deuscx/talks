import{t as T,z as I,B as K,d as J,aw as se,ai as re,ax as B,o as W,b as tt,e as Q,f as Dt,h as V,ad as ie,F as oe,g as wt,Q as ae,T as dt,ay as le,K as ue,y as ce,n as he,E as Vt,v as Ht,a9 as de,az as fe,l as ft,i as pe}from"./modules/vue-BN0LjGHi.js";import{X as ve,a as _t,a0 as It,S as Nt,z as jt,A as zt,Y as ge,a1 as xe,_ as bt,v as gt,a2 as pt,a3 as Ft,a4 as me,Q as ye,a5 as we,a6 as _e,a7 as be,a8 as Se,a9 as Pe,aa as Ee,ab as Me}from"./index-j7mVdA80.js";import{u as $e}from"./slidev/context-BfHhhU-n.js";import{c as H,g as Ce,a as ke}from"./modules/file-saver-igGfcqei.js";function Le(t){var e;return{info:T(((e=ve(t))==null?void 0:e.meta.slide)??null),update:async()=>{}}}const vt={};function Gn(t){function e(s){return vt[s]??(vt[s]=Le(s))}return{info:I({get(){return e(K(t)).info.value},set(s){e(K(t)).info.value=s}}),update:async(s,i)=>{const a=e(i??K(t)),u=await a.update(s);return u&&(a.info.value=u),u}}}const Ae=["id"],De=["id"],Ie=J({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1}},setup(t){const e=t,{isPrintMode:s}=_t(),i=T(null),a=se(i),u=T(null),f=I(()=>e.width??a.width.value),r=I(()=>e.width?e.width/It.value:a.height.value),n=I(()=>Nt.value&&!s.value?+Nt.value:Math.min(f.value/jt.value,r.value/zt.value)),l=I(()=>({height:`${zt.value}px`,width:`${jt.value}px`,transform:`translate(-50%, -50%) scale(${n.value})`,"--slidev-slide-scale":n.value})),h=I(()=>e.width?{width:`${e.width}px`,height:`${e.width/It.value}px`}:{});return e.isMain&&re(I(()=>`:root { --slidev-slide-scale: ${n.value}; }`)),B(ge,n),B(xe,u),(o,c)=>(W(),tt("div",{id:t.isMain?"slide-container":void 0,ref_key:"container",ref:i,class:"slidev-slide-container",style:V(h.value)},[Q("div",{id:t.isMain?"slide-content":void 0,ref_key:"slideElement",ref:u,class:"slidev-slide-content",style:V(l.value)},[Dt(o.$slots,"default",{},void 0,!0)],12,De),Dt(o.$slots,"controls",{},void 0,!0)],12,Ae))}}),Bn=bt(Ie,[["__scopeId","data-v-3e511c81"]]),Ne={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},je=J({__name:"SlideLoading",setup(t){const e=T(!1);return ie(()=>{setTimeout(()=>{e.value=!0},200)}),(s,i)=>(W(),tt("div",Ne,[e.value?(W(),tt(oe,{key:0},[i[0]||(i[0]=Q("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1)),i[1]||(i[1]=Q("div",null,"Loading slide...",-1))],64)):wt("v-if",!0)]))}});var ze=Object.defineProperty,Tt=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Kt=(t,e,s)=>e in t?ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,xt=(t,e)=>{for(var s in e||(e={}))Fe.call(e,s)&&Kt(t,s,e[s]);if(Tt)for(var s of Tt(e))Te.call(e,s)&&Kt(t,s,e[s]);return t},Ke=()=>({emit(t,...e){for(let s=0,i=this.events[t]||[],a=i.length;s<a;s++)i[s](...e)},events:{},on(t,e){var s;return((s=this.events)[t]||(s[t]=[])).push(e),()=>{var i;this.events[t]=(i=this.events[t])==null?void 0:i.filter(a=>e!==a)}}});function Ot(t,e,s,i=a=>a){return t*i(.5-e*(.5-s))}function Oe(t){return[-t[0],-t[1]]}function R(t,e){return[t[0]+e[0],t[1]+e[1]]}function F(t,e){return[t[0]-e[0],t[1]-e[1]]}function O(t,e){return[t[0]*e,t[1]*e]}function Re(t,e){return[t[0]/e,t[1]/e]}function st(t){return[t[1],-t[0]]}function Rt(t,e){return t[0]*e[0]+t[1]*e[1]}function Xe(t,e){return t[0]===e[0]&&t[1]===e[1]}function qe(t){return Math.hypot(t[0],t[1])}function Ge(t){return t[0]*t[0]+t[1]*t[1]}function Xt(t,e){return Ge(F(t,e))}function Yt(t){return Re(t,qe(t))}function Be(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function rt(t,e,s){let i=Math.sin(s),a=Math.cos(s),u=t[0]-e[0],f=t[1]-e[1],r=u*a-f*i,n=u*i+f*a;return[r+e[0],n+e[1]]}function mt(t,e,s){return R(t,O(F(e,t),s))}function qt(t,e,s){return R(t,O(e,s))}var{min:Z,PI:Ue}=Math,Gt=.275,it=Ue+1e-4;function Ve(t,e={}){let{size:s=16,smoothing:i=.5,thinning:a=.5,simulatePressure:u=!0,easing:f=b=>b,start:r={},end:n={},last:l=!1}=e,{cap:h=!0,easing:o=b=>b*(2-b)}=r,{cap:c=!0,easing:d=b=>--b*b*b+1}=n;if(t.length===0||s<=0)return[];let p=t[t.length-1].runningLength,m=r.taper===!1?0:r.taper===!0?Math.max(s,p):r.taper,L=n.taper===!1?0:n.taper===!0?Math.max(s,p):n.taper,A=Math.pow(s*i,2),j=[],g=[],x=t.slice(0,10).reduce((b,N)=>{let k=N.pressure;if(u){let D=Z(1,N.distance/s),ut=Z(1,1-D);k=Z(1,b+(ut-b)*(D*Gt))}return(b+k)/2},t[0].pressure),v=Ot(s,a,t[t.length-1].pressure,f),M,P=t[0].vector,y=t[0].point,_=y,w=y,S=_,C=!1;for(let b=0;b<t.length;b++){let{pressure:N}=t[b],{point:k,vector:D,distance:ut,runningLength:nt}=t[b];if(b<t.length-1&&p-nt<3)continue;if(a){if(u){let G=Z(1,ut/s),ht=Z(1,1-G);N=Z(1,x+(ht-x)*(G*Gt))}v=Ot(s,a,N,f)}else v=s/2;M===void 0&&(M=v);let te=nt<m?o(nt/m):1,ee=p-nt<L?d((p-nt)/L):1;v=Math.max(.01,v*Math.min(te,ee));let kt=(b<t.length-1?t[b+1]:t[b]).vector,ct=b<t.length-1?Rt(D,kt):1,ne=Rt(D,P)<0&&!C,Lt=ct!==null&&ct<0;if(ne||Lt){let G=O(st(P),v);for(let ht=1/13,ot=0;ot<=1;ot+=ht)w=rt(F(k,G),k,it*ot),j.push(w),S=rt(R(k,G),k,it*-ot),g.push(S);y=w,_=S,Lt&&(C=!0);continue}if(C=!1,b===t.length-1){let G=O(st(D),v);j.push(F(k,G)),g.push(R(k,G));continue}let At=O(st(mt(kt,D,ct)),v);w=F(k,At),(b<=1||Xt(y,w)>A)&&(j.push(w),y=w),S=R(k,At),(b<=1||Xt(_,S)>A)&&(g.push(S),_=S),x=N,P=D}let E=t[0].point.slice(0,2),$=t.length>1?t[t.length-1].point.slice(0,2):R(t[0].point,[1,1]),z=[],X=[];if(t.length===1){if(!(m||L)||l){let b=qt(E,Yt(st(F(E,$))),-(M||v)),N=[];for(let k=1/13,D=k;D<=1;D+=k)N.push(rt(b,E,it*2*D));return N}}else{if(!(m||L&&t.length===1))if(h)for(let N=1/13,k=N;k<=1;k+=N){let D=rt(g[0],E,it*k);z.push(D)}else{let N=F(j[0],g[0]),k=O(N,.5),D=O(N,.51);z.push(F(E,k),F(E,D),R(E,D),R(E,k))}let b=st(Oe(t[t.length-1].vector));if(L||m&&t.length===1)X.push($);else if(c){let N=qt($,b,v);for(let k=1/29,D=k;D<1;D+=k)X.push(rt(N,$,it*3*D))}else X.push(R($,O(b,v)),R($,O(b,v*.99)),F($,O(b,v*.99)),F($,O(b,v)))}return j.concat(X,g.reverse(),z)}function He(t,e={}){var s;let{streamline:i=.5,size:a=16,last:u=!1}=e;if(t.length===0)return[];let f=.15+(1-i)*.85,r=Array.isArray(t[0])?t:t.map(({x:d,y:p,pressure:m=.5})=>[d,p,m]);if(r.length===2){let d=r[1];r=r.slice(0,-1);for(let p=1;p<5;p++)r.push(mt(r[0],d,p/4))}r.length===1&&(r=[...r,[...R(r[0],[1,1]),...r[0].slice(2)]]);let n=[{point:[r[0][0],r[0][1]],pressure:r[0][2]>=0?r[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],l=!1,h=0,o=n[0],c=r.length-1;for(let d=1;d<r.length;d++){let p=u&&d===c?r[d].slice(0,2):mt(o.point,r[d],f);if(Xe(o.point,p))continue;let m=Be(p,o.point);if(h+=m,d<c&&!l){if(h<a)continue;l=!0}o={point:p,pressure:r[d][2]>=0?r[d][2]:.5,vector:Yt(F(o.point,p)),distance:m,runningLength:h},n.push(o)}return n[0].vector=((s=n[1])==null?void 0:s.vector)||[0,0],n}function Ye(t,e={}){return Ve(He(t,e),e)}function at(t,e){return t-e}function Ze(t){return t<0?-1:1}function lt(t){return[Math.abs(t),Ze(t)]}function Zt(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var Qe=2,q=Qe,et=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var e,s,i;const a=this.drauu.el,u=(e=this.drauu.options.coordinateScale)!=null?e:1,f=(s=this.drauu.options.offset)!=null?s:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const r=this.drauu.el.getBoundingClientRect();return{x:(t.pageX-r.left+f.x)*u,y:(t.pageY-r.top+f.y)*u,pressure:t.pressure}}else{const r=this.drauu.svgPoint;r.x=t.clientX+f.x,r.y=t.clientY+f.y;const n=r.matrixTransform((i=a.getScreenCTM())==null?void 0:i.inverse());return{x:n.x*u,y:n.y*u,pressure:t.pressure}}}createElement(t,e){var s;const i=document.createElementNS("http://www.w3.org/2000/svg",t),a=e?xt(xt({},this.brush),e):this.brush;return i.setAttribute("fill",(s=a.fill)!=null?s:"transparent"),i.setAttribute("stroke",a.color),i.setAttribute("stroke-width",a.size.toString()),i.setAttribute("stroke-linecap","round"),a.dasharray&&i.setAttribute("stroke-dasharray",a.dasharray),i}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(q))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},Je=class Qt extends et{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){return Qt.getSvgData(e,this.brush)}static getSvgData(e,s){const i=Ye(e,xt({size:s.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},s.stylusOptions));if(!i.length)return"";const a=i.reduce((u,[f,r],n,l)=>{const[h,o]=l[(n+1)%l.length];return u.push(f,r,(f+h)/2,(r+o)/2),u},["M",...i[0],"Q"]);return a.push("Z"),a.map(u=>typeof u=="number"?u.toFixed(2):u).join(" ")}},We=class extends et{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=lt(t.x-this.start.x),[i,a]=lt(t.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,i);e=u,i=u}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",i);else{const[u,f]=[this.start.x,this.start.x+e*s].sort(at),[r,n]=[this.start.y,this.start.y+i*a].sort(at);this.attr("cx",(u+f)/2),this.attr("cy",(r+n)/2),this.attr("rx",(f-u)/2),this.attr("ry",(n-r)/2)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Jt(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","marker"),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("fill",e),i.setAttribute("id",t),i.setAttribute("viewBox","0 -5 10 10"),i.setAttribute("refX","5"),i.setAttribute("refY","0"),i.setAttribute("markerWidth","4"),i.setAttribute("markerHeight","4"),i.setAttribute("orient","auto"),a.setAttribute("d","M0,-5L10,0L0,5"),i.appendChild(a),s.appendChild(i),s}var tn=class extends et{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=Zt(),s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.append(Jt(e,this.brush.color)),s.append(this.el),this.attr("marker-end",`url(#${e})`),s}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:s}=t;if(this.shiftPressed){const i=t.x-this.start.x,a=t.y-this.start.y;if(a!==0){let u=i/a;u=Math.round(u),Math.abs(u)<=1?(e=this.start.x+a*u,s=this.start.y+a):(e=this.start.x+i,s=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-s),this.attr("x2",e),this.attr("y2",s)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",s)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||t.getTotalLength()<5)}},en=class extends et{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=lt(t.x-this.start.x),[i,a]=lt(t.y-this.start.y);if(this.shiftPressed){const u=Math.min(e,i);e=u,i=u}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-i),this.attr("width",e*2),this.attr("height",i*2);else{const[u,f]=[this.start.x,this.start.x+e*s].sort(at),[r,n]=[this.start.y,this.start.y+i*a].sort(at);this.attr("x",u),this.attr("y",r),this.attr("width",f-u),this.attr("height",n-r)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function nn(t,e){const s=t.x-e.x,i=t.y-e.y;return s*s+i*i}function sn(t,e,s){let i=e.x,a=e.y,u=s.x-i,f=s.y-a;if(u!==0||f!==0){const r=((t.x-i)*u+(t.y-a)*f)/(u*u+f*f);r>1?(i=s.x,a=s.y):r>0&&(i+=u*r,a+=f*r)}return u=t.x-i,f=t.y-a,u*u+f*f}function rn(t,e){let s=t[0];const i=[s];let a;for(let u=1,f=t.length;u<f;u++)a=t[u],nn(a,s)>e&&(i.push(a),s=a);return s!==a&&a&&i.push(a),i}function yt(t,e,s,i,a){let u=i,f=0;for(let r=e+1;r<s;r++){const n=sn(t[r],t[e],t[s]);n>u&&(f=r,u=n)}u>i&&(f-e>1&&yt(t,e,f,i,a),a.push(t[f]),s-f>1&&yt(t,f,s,i,a))}function on(t,e){const s=t.length-1,i=[t[0]];return yt(t,0,s,e,i),i.push(t[s]),i}function Bt(t,e,s=!1){if(t.length<=2)return t;const i=e*e;return t=s?t:rn(t,i),t=on(t,i),t}var an=class U extends et{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=Zt();const s=Jt(this.arrowId,this.brush.color);this.el.appendChild(s)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=Bt(this.points,1,!0),this.count=0),this.attr("d",U.toSvgData(this.points)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;if(e.setAttribute("d",U.toSvgData(Bt(this.points,1,!0))),!e.getTotalLength()){const{x:s,y:i}=this.points[0],a=this.brush.size/2;e.setAttribute("d",`M ${s-a} ${i} a ${a},${a} 0 1,0 ${a*2},0 a ${a},${a} 0 1,0 ${-a*2},0`),e.setAttribute("fill",this.brush.color),e.setAttribute("stroke-width","0")}return!0}static line(e,s){const i=s.x-e.x,a=s.y-e.y;return{length:Math.sqrt(i**2+a**2),angle:Math.atan2(a,i)}}static controlPoint(e,s,i,a){const u=s||e,f=i||e,r=.2,n=U.line(u,f),l=n.angle+(a?Math.PI:0),h=n.length*r,o=e.x+Math.cos(l)*h,c=e.y+Math.sin(l)*h;return{x:o,y:c}}static bezierCommand(e,s,i){const a=U.controlPoint(i[s-1],i[s-2],e),u=U.controlPoint(e,i[s-1],i[s+1],!0);return`C ${a.x.toFixed(q)},${a.y.toFixed(q)} ${u.x.toFixed(q)},${u.y.toFixed(q)} ${e.x.toFixed(q)},${e.y.toFixed(q)}`}static toSvgData(e){return e.reduce((s,i,a,u)=>a===0?`M ${i.x.toFixed(q)},${i.y.toFixed(q)}`:`${s} ${U.bezierCommand(i,a,u)}`,"")}},ln=class extends et{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const e=(s,i)=>{if(s&&s.length)for(let a=0;a<s.length;a++){const u=s[a];if(u.getTotalLength){const f=u.getTotalLength();for(let r=0;r<this.pathSubFactor;r++){const n=u.getPointAtLength(f*r/this.pathSubFactor),l=u.getPointAtLength(f*(r+1)/this.pathSubFactor);this.pathFragments.push({x1:n.x,x2:l.x,y1:n.y,y2:l.y,segment:r,element:i||u})}}else u.children&&e(u.children,u)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(e=>this.drauu._restoreNode(e)),redo:()=>t.forEach(e=>this.drauu._removeNode(e))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const e=this.pathFragments[t],s={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(e,s)&&(this.drauu._removeNode(e.element),this._erased.push(e.element))}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,e){const s=t.x1,i=t.x2,a=e.x1,u=e.x2,f=t.y1,r=t.y2,n=e.y1,l=e.y2,h=(s-i)*(n-l)-(f-r)*(a-u),o=(s*r-f*i)*(a-u)-(s-i)*(a*l-n*u),c=(s*r-f*i)*(n-l)-(f-r)*(a*l-n*u),d=(p,m,L)=>p>=m&&p<=L?!0:p>=L&&p<=m;if(h===0)return!1;{const p={x:o/h,y:c/h};return d(p.x,s,i)&&d(p.y,f,r)&&d(p.x,a,u)&&d(p.y,n,l)}}};function un(t){return{draw:new an(t),stylus:new Je(t),line:new tn(t),rectangle:new en(t),ellipse:new We(t),eraseLine:new ln(t)}}var cn=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Ke(),this._originalPointerId=null,this._models=un(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e,s=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const i=this.resolveSelector(e)||this.el,a=this.eventStart.bind(this),u=this.eventMove.bind(this),f=this.eventEnd.bind(this),r=this.eventKeyboard.bind(this);i.addEventListener("pointerdown",a,{passive:!1}),s.addEventListener("pointermove",u,{passive:!1}),s.addEventListener("pointerup",f,{passive:!1}),s.addEventListener("pointercancel",f,{passive:!1}),s.addEventListener("keydown",r,!1),s.addEventListener("keyup",r,!1),this._disposables.push(()=>{i.removeEventListener("pointerdown",a),s.removeEventListener("pointermove",u),s.removeEventListener("pointerup",f),s.removeEventListener("pointercancel",f),s.removeEventListener("keydown",r,!1),s.removeEventListener("keyup",r,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);if(!e)this.cancel();else if(e===!0){const s=this._currentNode;this._appendNode(s),this.commit({undo:()=>this._removeNode(s),redo:()=>this._restoreNode(s)})}else this.commit(e);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const e=this._elements.at(-1);e?e.after(t):this.el.append(t);const s=this._elements.push(t)-1;t.dataset.drauu_index=s.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const e=+t.dataset.drauu_index;this._elements[e]=t;for(let s=e-1;s>=0;s--){const i=this._elements[s];if(i){i.after(t);return}}this.el.prepend(t)}};function hn(t){return new cn(t)}const dn=ae(()=>{const{currentSlideNo:t,isPresenter:e}=_t(),s=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],i=dt("slidev-drawing-enabled",!1),a=dt("slidev-drawing-pinned",!1),u=le(dt("slidev-drawing-brush",{color:s[0],size:4,mode:"stylus"})),f=T(!1),r=T(!1),n=T(!1),l=T(!1),h=T("stylus"),o=I(()=>gt.drawings.syncAll||e.value);let c=!1;const d=I({get(){return h.value},set(g){h.value=g,g==="arrow"?(m.mode="line",u.arrowEnd=!0):(m.mode=g,u.arrowEnd=!1)}}),p=ue({brush:u,acceptsInputTypes:I(()=>i.value&&(!gt.drawings.presenterOnly||e.value)?void 0:["pen"]),coordinateTransform:!1}),m=ce(hn(p));function L(){m.clear(),o.value&&Ft(t.value,"")}function A(){var g;n.value=m.canRedo(),r.value=m.canUndo(),l.value=!!((g=m.el)!=null&&g.children.length)}function j(g){c=!0;const x=pt[g||t.value];x!=null?m.load(x):m.clear(),A(),c=!1}return m.on("changed",()=>{if(A(),!c){const g=m.dump(),x=t.value;(pt[x]||"")!==g&&o.value&&Ft(x,m.dump())}}),me(g=>{c=!0,g[t.value]!=null&&m.load(g[t.value]||""),c=!1,A()}),he(()=>{Vt(t,()=>{m.mounted&&j()},{immediate:!0})}),m.on("start",()=>f.value=!0),m.on("end",()=>f.value=!1),window.addEventListener("keydown",g=>{if(!i.value||ye.value)return;const x=!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey;let v=!0;g.code==="KeyZ"&&(g.ctrlKey||g.metaKey)?g.shiftKey?m.redo():m.undo():g.code==="Escape"?i.value=!1:g.code==="KeyL"&&x?d.value="line":g.code==="KeyA"&&x?d.value="arrow":g.code==="KeyS"&&x?d.value="stylus":g.code==="KeyR"&&x?d.value="rectangle":g.code==="KeyE"&&x?d.value="ellipse":g.code==="KeyC"&&x?L():g.code.startsWith("Digit")&&x&&+g.code[5]<=s.length?u.color=s[+g.code[5]-1]:v=!1,v&&(g.preventDefault(),g.stopPropagation())},!1),{brush:u,brushColors:s,canClear:l,canRedo:n,canUndo:r,clear:L,drauu:m,drauuOptions:p,drawingEnabled:i,drawingMode:d,drawingPinned:a,drawingState:pt,isDrawing:f,loadCanvas:j}});var St={exports:{}};St.exports;(function(t){(function(e,s,i){function a(n){var l=this,h=r();l.next=function(){var o=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=o-(l.c=o|0)},l.c=1,l.s0=h(" "),l.s1=h(" "),l.s2=h(" "),l.s0-=h(n),l.s0<0&&(l.s0+=1),l.s1-=h(n),l.s1<0&&(l.s1+=1),l.s2-=h(n),l.s2<0&&(l.s2+=1),h=null}function u(n,l){return l.c=n.c,l.s0=n.s0,l.s1=n.s1,l.s2=n.s2,l}function f(n,l){var h=new a(n),o=l&&l.state,c=h.next;return c.int32=function(){return h.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,o&&(typeof o=="object"&&u(o,h),c.state=function(){return u(h,{})}),c}function r(){var n=4022871197,l=function(h){h=String(h);for(var o=0;o<h.length;o++){n+=h.charCodeAt(o);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return l}s&&s.exports?s.exports=f:this.alea=f})(H,t)})(St);var fn=St.exports,Pt={exports:{}};Pt.exports;(function(t){(function(e,s,i){function a(r){var n=this,l="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var o=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^o^o>>>8},r===(r|0)?n.x=r:l+=r;for(var h=0;h<l.length+64;h++)n.x^=l.charCodeAt(h)|0,n.next()}function u(r,n){return n.x=r.x,n.y=r.y,n.z=r.z,n.w=r.w,n}function f(r,n){var l=new a(r),h=n&&n.state,o=function(){return(l.next()>>>0)/4294967296};return o.double=function(){do var c=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=l.next,o.quick=o,h&&(typeof h=="object"&&u(h,l),o.state=function(){return u(l,{})}),o}s&&s.exports?s.exports=f:this.xor128=f})(H,t)})(Pt);var pn=Pt.exports,Et={exports:{}};Et.exports;(function(t){(function(e,s,i){function a(r){var n=this,l="";n.next=function(){var o=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(o^o<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,r===(r|0)?n.x=r:l+=r;for(var h=0;h<l.length+64;h++)n.x^=l.charCodeAt(h)|0,h==l.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function u(r,n){return n.x=r.x,n.y=r.y,n.z=r.z,n.w=r.w,n.v=r.v,n.d=r.d,n}function f(r,n){var l=new a(r),h=n&&n.state,o=function(){return(l.next()>>>0)/4294967296};return o.double=function(){do var c=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=l.next,o.quick=o,h&&(typeof h=="object"&&u(h,l),o.state=function(){return u(l,{})}),o}s&&s.exports?s.exports=f:this.xorwow=f})(H,t)})(Et);var vn=Et.exports,Mt={exports:{}};Mt.exports;(function(t){(function(e,s,i){function a(r){var n=this;n.next=function(){var h=n.x,o=n.i,c,d;return c=h[o],c^=c>>>7,d=c^c<<24,c=h[o+1&7],d^=c^c>>>10,c=h[o+3&7],d^=c^c>>>3,c=h[o+4&7],d^=c^c<<7,c=h[o+7&7],c=c^c<<13,d^=c^c<<9,h[o]=d,n.i=o+1&7,d};function l(h,o){var c,d=[];if(o===(o|0))d[0]=o;else for(o=""+o,c=0;c<o.length;++c)d[c&7]=d[c&7]<<15^o.charCodeAt(c)+d[c+1&7]<<13;for(;d.length<8;)d.push(0);for(c=0;c<8&&d[c]===0;++c);for(c==8?d[7]=-1:d[c],h.x=d,h.i=0,c=256;c>0;--c)h.next()}l(n,r)}function u(r,n){return n.x=r.x.slice(),n.i=r.i,n}function f(r,n){r==null&&(r=+new Date);var l=new a(r),h=n&&n.state,o=function(){return(l.next()>>>0)/4294967296};return o.double=function(){do var c=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=l.next,o.quick=o,h&&(h.x&&u(h,l),o.state=function(){return u(l,{})}),o}s&&s.exports?s.exports=f:this.xorshift7=f})(H,t)})(Mt);var gn=Mt.exports,$t={exports:{}};$t.exports;(function(t){(function(e,s,i){function a(r){var n=this;n.next=function(){var h=n.w,o=n.X,c=n.i,d,p;return n.w=h=h+1640531527|0,p=o[c+34&127],d=o[c=c+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=o[c]=p^d,n.i=c,p+(h^h>>>16)|0};function l(h,o){var c,d,p,m,L,A=[],j=128;for(o===(o|0)?(d=o,o=null):(o=o+"\0",d=0,j=Math.max(j,o.length)),p=0,m=-32;m<j;++m)o&&(d^=o.charCodeAt((m+32)%o.length)),m===0&&(L=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&(L=L+1640531527|0,c=A[m&127]^=d+L,p=c==0?p+1:0);for(p>=128&&(A[(o&&o.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=A[p+34&127],c=A[p=p+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,A[p]=d^c;h.w=L,h.X=A,h.i=p}l(n,r)}function u(r,n){return n.i=r.i,n.w=r.w,n.X=r.X.slice(),n}function f(r,n){r==null&&(r=+new Date);var l=new a(r),h=n&&n.state,o=function(){return(l.next()>>>0)/4294967296};return o.double=function(){do var c=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=l.next,o.quick=o,h&&(h.X&&u(h,l),o.state=function(){return u(l,{})}),o}s&&s.exports?s.exports=f:this.xor4096=f})(H,t)})($t);var xn=$t.exports,Ct={exports:{}};Ct.exports;(function(t){(function(e,s,i){function a(r){var n=this,l="";n.next=function(){var o=n.b,c=n.c,d=n.d,p=n.a;return o=o<<25^o>>>7^c,c=c-d|0,d=d<<24^d>>>8^p,p=p-o|0,n.b=o=o<<20^o>>>12^c,n.c=c=c-d|0,n.d=d<<16^c>>>16^p,n.a=p-o|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,r===Math.floor(r)?(n.a=r/4294967296|0,n.b=r|0):l+=r;for(var h=0;h<l.length+20;h++)n.b^=l.charCodeAt(h)|0,n.next()}function u(r,n){return n.a=r.a,n.b=r.b,n.c=r.c,n.d=r.d,n}function f(r,n){var l=new a(r),h=n&&n.state,o=function(){return(l.next()>>>0)/4294967296};return o.double=function(){do var c=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},o.int32=l.next,o.quick=o,h&&(typeof h=="object"&&u(h,l),o.state=function(){return u(l,{})}),o}s&&s.exports?s.exports=f:this.tychei=f})(H,t)})(Ct);var mn=Ct.exports,Wt={exports:{}};const yn={},wn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),_n=Ce(wn);(function(t){(function(e,s,i){var a=256,u=6,f=52,r="random",n=i.pow(a,u),l=i.pow(2,f),h=l*2,o=a-1,c;function d(x,v,M){var P=[];v=v==!0?{entropy:!0}:v||{};var y=A(L(v.entropy?[x,g(s)]:x??j(),3),P),_=new p(P),w=function(){for(var S=_.g(u),C=n,E=0;S<l;)S=(S+E)*a,C*=a,E=_.g(1);for(;S>=h;)S/=2,C/=2,E>>>=1;return(S+E)/C};return w.int32=function(){return _.g(4)|0},w.quick=function(){return _.g(4)/4294967296},w.double=w,A(g(_.S),s),(v.pass||M||function(S,C,E,$){return $&&($.S&&m($,_),S.state=function(){return m(_,{})}),E?(i[r]=S,C):S})(w,y,"global"in v?v.global:this==i,v.state)}function p(x){var v,M=x.length,P=this,y=0,_=P.i=P.j=0,w=P.S=[];for(M||(x=[M++]);y<a;)w[y]=y++;for(y=0;y<a;y++)w[y]=w[_=o&_+x[y%M]+(v=w[y])],w[_]=v;(P.g=function(S){for(var C,E=0,$=P.i,z=P.j,X=P.S;S--;)C=X[$=o&$+1],E=E*a+X[o&(X[$]=X[z=o&z+C])+(X[z]=C)];return P.i=$,P.j=z,E})(a)}function m(x,v){return v.i=x.i,v.j=x.j,v.S=x.S.slice(),v}function L(x,v){var M=[],P=typeof x,y;if(v&&P=="object")for(y in x)try{M.push(L(x[y],v-1))}catch{}return M.length?M:P=="string"?x:x+"\0"}function A(x,v){for(var M=x+"",P,y=0;y<M.length;)v[o&y]=o&(P^=v[o&y]*19)+M.charCodeAt(y++);return g(v)}function j(){try{var x;return c&&(x=c.randomBytes)?x=x(a):(x=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(x)),g(x)}catch{var v=e.navigator,M=v&&v.plugins;return[+new Date,e,M,e.screen,g(s)]}}function g(x){return String.fromCharCode.apply(0,x)}if(A(i.random(),s),t.exports){t.exports=d;try{c=_n}catch{}}else i["seed"+r]=d})(typeof self<"u"?self:H,[],Math)})(Wt);var bn=Wt.exports,Sn=fn,Pn=pn,En=vn,Mn=gn,$n=xn,Cn=mn,Y=bn;Y.alea=Sn;Y.xor128=Pn;Y.xorwow=En;Y.xorshift7=Mn;Y.xor4096=$n;Y.tychei=Cn;var kn=Y;const Ln=ke(kn),Ut=.3,An=.3,Dn=.3,In=J({__name:"global-bottom",setup(t){const{$slidev:e,$nav:s,$clicksContext:i,$clicks:a,$page:u,$renderContext:f,$frontmatter:r}=$e(),{currentSlideRoute:n}=_t(),l=I(()=>{var v,M;return((M=(v=n.value.meta)==null?void 0:v.slide)==null?void 0:M.frontmatter)||{}}),h=I(()=>l.value.glow||"full"),o=I(()=>+(l.value.glowOpacity??.4)),c=I(()=>+(l.value.glowHue||0)),d=I(()=>l.value.glowSeed==="false"||l.value.glowSeed===!1?Date.now().toString():l.value.glowSeed||"default"),p=I(()=>e.configs.colorSchema==="dark");function m(v){let y=[-.2,1.2],_=[-.2,1.2];function w(C,E){return[Math.max(C[0],E[0]),Math.min(C[1],E[1])]}const S=v.split("-");for(const C of S)switch(C){case"topmost":_=w(_,[-.5,0]);break;case"top":_=w(_,[-.2,.6]);break;case"bottom":_=w(_,[.4,1.2]);break;case"left":y=w(y,[-.2,.6]);break;case"right":y=w(y,[.4,1.2]);break;case"xcenter":y=w(y,[.25,.75]);break;case"ycenter":_=w(_,[.25,.75]);break;case"center":y=w(y,[.25,.75]),_=w(_,[.25,.75]);break;case"full":y=w(y,[0,1]),_=w(_,[0,1]);break}return{x:y,y:_}}function L([v,M],[P,y]){return(P-v)**2+(y-M)**2}function A(v=16){function M(){const w=m(h.value),S=Ln(`${d.value}-${n.value.no}`);function C([$,z]){return S()*(z-$)+$}function E($,z){return $=$*(1+z*2)-z,S()<Dn?$+(S()-.5)*An:$}return Array.from({length:v}).fill(0).map(()=>[E(C(w.x),Ut),E(C(w.y),Ut)])}const P=T(M()),y=I(()=>P.value.map(([w,S])=>`${w*100}% ${S*100}%`).join(", "));function _(){const w=new Set(M());P.value=P.value.map(S=>{let C=Number.POSITIVE_INFINITY,E;for(const $ of w){const z=L(S,$);z<C&&(C=z,E=$)}return w.delete(E),E})}return Vt(n,()=>{_()}),y}const j=A(10),g=A(6),x=A(3);return(v,M)=>p.value?(W(),tt("div",{key:0,class:"bg transform-gpu overflow-hidden pointer-events-none",style:V({filter:`blur(70px) hue-rotate(${c.value}deg)`}),"aria-hidden":"true"},[Q("div",{class:"clip bg-gradient-to-r from-[#00DC82] to-white/10",style:V({"clip-path":`polygon(${K(j)})`,opacity:o.value})},null,4),Q("div",{class:"clip bg-gradient-to-l from-[#2f96ad] to-white/10",style:V({"clip-path":`polygon(${K(g)})`,opacity:o.value})},null,4),Q("div",{class:"clip bg-gradient-to-t from-lime to-white/10",style:V({"clip-path":`polygon(${K(x)})`,opacity:.2})},null,4)],4)):wt("v-if",!0)}}),Nn=bt(In,[["__scopeId","data-v-9ef80018"]]),Un={render:()=>[]},Vn={render:()=>[Ht(Nn)]},jn={render:()=>[]},zn={render:()=>[]},Fn=["data-slidev-no"],Tn=J({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(t){const e=t,s=I(()=>{var f,r;return((r=(f=e.route.meta)==null?void 0:f.slide)==null?void 0:r.frontmatter.zoom)??1});B(we,e.route),B(_e,e.route.meta.slide.frontmatter),B(be,T(e.route.no)),B(Se,T(e.renderContext)),B(Pe,de(e,"clicksContext")),B(Ee,s);const i=I(()=>s.value===1?void 0:{width:`${100/s.value}%`,height:`${100/s.value}%`,transformOrigin:"top left",transform:`scale(${s.value})`}),a=I(()=>({...i.value,"user-select":gt.selectable?void 0:"none"})),u=I(()=>e.route&&fe({loader:async()=>{var r,n;const f=await e.route.component();return J({mounted:(r=e.clicksContext)==null?void 0:r.onMounted,unmounted:(n=e.clicksContext)==null?void 0:n.onUnmounted,render:()=>Ht(f.default)})},delay:300,loadingComponent:je}));return(f,r)=>(W(),tt("div",{"data-slidev-no":e.route.no,class:pe(K(Me)(t.route,["slide","presenter"].includes(e.renderContext)?"":"disable-view-transition")),style:V(a.value)},[ft(K(zn)),ft(K(u)),ft(K(jn))],14,Fn))}}),Hn=bt(Tn,[["__scopeId","data-v-42fc12c5"]]),Kn=["innerHTML"],Yn=J({__name:"DrawingPreview",props:{page:{}},setup(t){const{drawingState:e}=dn();return(s,i)=>K(e)[s.page]?(W(),tt("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:K(e)[s.page]},null,8,Kn)):wt("v-if",!0)}});export{Vn as G,Hn as S,Yn as _,Bn as a,Le as b,dn as c,Un as d,Gn as u};
